<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subin B - Software Developer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- Add Lenis for Smooth Scrolling -->
    <script src="https://unpkg.com/lenis@1.1.18/dist/lenis.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital,wght@0,600;0,700;1,600&display=swap"
        rel="stylesheet">
    <style>
        /* ─── INTRO LOADER ─────────────────────────────── */
        #intro-loader {
            position: absolute;
            inset: 0;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #0b1220;
            opacity: 0;
            /* starts invisible */
            animation: loaderFadeIn 0.6s linear 0.1s forwards;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        /* Stage 1 & 2 wrapper */
        #intro-center {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: clamp(1.5rem, 6vw, 5rem);
            width: 100%;
            padding: 0 2rem;
        }

        /* Large bracket characters */
        .intro-bracket {
            font-size: clamp(4rem, 12vw, 9rem);
            font-weight: 200;
            color: #ffffff;
            line-height: 1;
            display: inline-block;
            will-change: transform, opacity;
            /* bracket transitions for Stage 3 expansion */
            transition: transform 1.5s linear, opacity 1.5s linear;
        }

        /* Middle text area (LOADING or numbers) */
        #intro-label {
            font-size: clamp(1.2rem, 4vw, 2.8rem);
            font-weight: 500;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            color: #ffffff;
            min-width: clamp(8rem, 20vw, 22rem);
            text-align: center;
            will-change: opacity;
            transition: opacity 0.4s linear;
        }

        /* Stage 3 HELLO block — hidden initially */
        #intro-hello {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
            padding: 0 1rem;
            opacity: 0;
            transform: scale(0.92);
            will-change: opacity, transform;
            transition: opacity 1.2s linear, transform 1.2s linear;
            pointer-events: none;
        }

        #intro-hello.visible {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }

        #intro-hello .hello-tag {
            font-size: clamp(0.6rem, 1.5vw, 0.75rem);
            letter-spacing: 0.35em;
            text-transform: uppercase;
            font-weight: 700;
            color: #ffffff;
        }

        #intro-hello .hello-sub {
            font-size: clamp(0.85rem, 2vw, 1.1rem);
            color: #9ca3af;
            /* gray-400 */
            max-width: 22rem;
            line-height: 1.6;
        }

        /* Loader fade-out at end */
        #intro-loader.done {
            opacity: 0;
            transition: opacity 0.6s linear;
            pointer-events: none;
        }

        /* #intro-hello smooth position transition for the "join" move */
        #intro-hello.joining {
            /* stays fully opaque while flying; opacity handled separately in JS */
            transition: transform 1.4s linear;
        }

        /* Hero hello: reveal after join */
        #hero-hello {
            transition: opacity 0.5s linear;
        }

        @keyframes loaderFadeIn {
            to {
                opacity: 1;
            }
        }

        .no-scroll {
            overflow: hidden;
        }

        :root {
            --bg: #0f1218;
            --text: #f5f5f5;
            --accent: #d2d2d2;
        }

        /* Lenis Required CSS */
        html.lenis,
        html.lenis body {
            height: auto;
        }

        .lenis.lenis-smooth {
            scroll-behavior: auto !important;
        }

        .lenis.lenis-smooth [data-lenis-prevent] {
            overscroll-behavior: contain;
        }

        .lenis.lenis-stopped {
            overflow: hidden;
        }

        .lenis.lenis-smooth iframe {
            pointer-events: none;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .display-text {
            font-family: 'Playfair Display', serif;
        }

        .bracket {
            font-size: 3rem;
            font-weight: 300;
            line-height: 1;
        }

        .hero-big {
            font-size: clamp(4rem, 15vw, 15rem);
            line-height: 0.9;
        }

        .project-section {
            background: linear-gradient(135deg, #1a1c23 0%, #111216 100%);
            border-radius: 2rem;
            transform-origin: top center;
        }

        /* Marquee */
        .marquee-track {
            display: flex;
            width: fit-content;
            animation: marquee 20s linear infinite;
        }

        .marquee-track:hover {
            animation-play-state: paused;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* Scrub Text Reveal Style */
        .reveal-text-scrub {
            background: linear-gradient(to right, white 50%, rgba(255, 255, 255, 0.15) 50%);
            background-size: 200% 100%;
            background-position: 100% 0;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline;
        }

        .footer-big {
            font-size: clamp(4rem, 18vw, 20rem);
            white-space: nowrap;
        }

        /* ─── Hero: 200vh with overflow:hidden contains the expanding image ─── */
        #hero {
            position: relative;
            overflow: hidden;
            height: 200vh;
        }

        /* Sticky inner keeps the text pinned for the first 100vh of scroll */
        #hero-sticky {
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 5rem 1rem 2.5rem;
        }

        /* Image wrapper: absolute inside hero, full-section-width × 100vh.      */
        /* clip-path shrinks it to a small strip initially; GSAP scrubs it open. */
        #hero-img-wrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: 0;
            /* behind sticky text (z-index: 10 via .hero-row) */
            pointer-events: none;

        }

        #hero-img-wrap {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60vw;
            height: 65vh;
            transform: translate(-50%, -50%) scale(1);
            border-radius: 2rem;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
            will-change: transform;
        }

        /* Hero text sits above the image */
        .hero-row {
            position: relative;
            z-index: 10;
        }
    </style>
</head>

<body class="antialiased selection:bg-white selection:text-black">
    <!-- ══ 3-Stage Intro Loader ══════════════════════════════════ -->
    <div id="intro-loader" aria-label="Loading" role="status">

        <!-- Stage 1 & 2: brackets + LOADING / counting number -->
        <div id="intro-center">
            <span class="intro-bracket" id="bracket-left">(</span>
            <span id="intro-label">LOADING</span>
            <span class="intro-bracket" id="bracket-right">)</span>
        </div>

        <!-- Stage 3: HELLO block (overlaid, revealed in place) -->
        <div id="intro-hello">
            <span class="hello-tag">Hello!</span>
            <p class="hello-sub">
                I'm Subin B, a software development intern. Welcome to my portfolio!
            </p>
        </div>

    </div>
    <!-- ══════════════════════════════════════════════════════════ -->

    <!-- Navigation -->
    <nav
        class="fixed top-0 left-0 w-full z-50 px-6 py-8 mix-blend-difference flex justify-between items-center text-sm tracking-widest uppercase">
        <a href="#" class="font-bold text-lg hidden md:block">|| Subin B ||</a>
        <div class="hidden md:flex gap-8 gap-12 font-medium">
            <a href="#projects" class="hover:text-gray-400 transition-colors">Projects</a>
            <a href="#about" class="hover:text-gray-400 transition-colors">About Me</a>
            <a href="#services" class="hover:text-gray-400 transition-colors">Skills</a>
            <a href="#contact" class="hover:text-gray-400 transition-colors">Contact</a>
        </div>
        <div class="md:hidden flex flex-col gap-1.5 cursor-pointer">
            <span class="w-8 h-px bg-white"></span>
            <span class="w-8 h-px bg-white"></span>
            <span class="w-8 h-px bg-white"></span>
            <span class="w-8 h-px bg-white"></span>
        </div>
    </nav>

    <!-- Hero Section: 200vh gives scroll room for the image expansion animation -->
    <section id="hero">

        <!-- Image wrapper: absolute, clips via clip-path scrubbed by GSAP -->
        <div id="hero-img-wrap">
            <img src="IMG_20260105_222632.jpg.jpeg" alt="Hero img" class="hero-img">
        </div>

        <!-- Sticky inner: stays centred on screen while user scrolls through hero -->
        <div id="hero-sticky">

            <div id="hero-hello" class="hero-row flex items-center gap-6 mb-16 text-center" style="opacity:0;">
                <span class="bracket">(</span>
                <div class="flex flex-col items-center gap-4">
                    <span class="text-xs uppercase tracking-[0.3em] font-bold">Hello!</span>
                    <p class="max-w-xs text-base md:text-lg text-gray-300">
                        I'm Subin B, a software development intern. Welcome to my portfolio!
                    </p>
                </div>
                <span class="bracket">)</span>
            </div>

            <div class="hero-row w-full flex justify-between items-center max-w-[1400px] mx-auto px-4 md:px-10"
                style="min-height: clamp(120px, 15vw, 220px);">
                <h1 class="hero-left hero-big display-text tracking-tight w-1/3 text-right">Dev</h1>
                <div class="w-1/3"></div>
                <h1 class="hero-right hero-big display-text tracking-tight w-1/3 text-left pl-6">eloper</h1>
            </div>

        </div>
    </section>

    <!-- Projects Section (Stacking Scroll Effect) -->
    <section id="projects" class="py-20 px-14 md:px-8 max-w-[1600px] mx-auto relative mt-32">
        <!-- Project 1 -->
        <div class="project-card project-section 
    p-8 md:p-16 
    flex flex-col md:flex-row gap-16 
    mb-24 md:mb-64 
    overflow-hidden relative group 
    sticky top-32 
    max-w-[1200px] mx-auto">
            <div class="md:w-5/12 z-10">
                <p class="text-xs tracking-widest uppercase mb-2 text-gray-400">PROJECT 01</p>
                <h2 class="text-5xl md:text-7xl mb-8 display-text leading-tight text-white">Language Agnostic<br>Chatbot
                </h2>
                <p class="text-gray-400 text-lg leading-relaxed mb-10 max-w-sm">
                    A scalable multilingual chatbot with n8n workflow automation. Integrated REST APIs and Pinecone
                    vector database for semantic data handling. Designed with MongoDB and React.js.
                </p>

                <a href="#"
                    class="inline-flex items-center gap-4 text-sm tracking-widest uppercase hover:text-gray-300">
                    <span class="bracket text-2xl">(</span>
                    Visit Site ↗
                    <span class="bracket text-2xl">)</span>
                </a>
            </div>

            <div class="md:w-7/12 z-10 flex flex-col">
                <div class="border-b border-white/20 pb-4 mb-4">
                    <p class="text-sm tracking-widest uppercase font-semibold">SIH Finalist Project</p>
                </div>
                <div class="border-b border-white/20 pb-4 mb-10">
                    <p class="text-sm tracking-widest uppercase text-gray-400">PYTHON • MONGO DB • REACT.JS • LANGCHAIN
                    </p>
                </div>

                <div
                    class="relative w-full aspect-video rounded-2xl overflow-hidden bg-black/50 group-hover:scale-[1.02] transition-transform duration-700">
                    <img src="https://images.unsplash.com/photo-1677442136019-21780ecad995?w=1200&h=800&fit=crop"
                        class="w-full h-full object-cover opacity-80" alt="Chatbot">
                </div>
            </div>
        </div>

        <!-- Project 2 -->
        <div class="project-card project-section 
    p-8 md:p-16 
    flex flex-col md:flex-row gap-16 
    overflow-hidden relative group 
    sticky top-28 
    mb-32 
    z-10 
    shadow-[0_-10px_30px_rgba(0,0,0,0.5)]
    max-w-[1200px] mx-auto">
            <div class="md:w-5/12 z-10">
                <p class="text-xs tracking-widest uppercase mb-2 text-gray-400">PROJECT 02</p>
                <h2 class="text-5xl md:text-7xl mb-8 display-text leading-tight text-white">FRAEMI<br>Vision</h2>
                <p class="text-gray-400 text-lg leading-relaxed mb-10 max-w-sm">
                    A responsive corporate website emphasizing performance, usability, and clean design. Features custom
                    UI enhancements, showcase pages, and seamless Firebase integration.
                </p>

                <a href="#"
                    class="inline-flex items-center gap-4 text-sm tracking-widest uppercase hover:text-gray-300">
                    <span class="bracket text-2xl">(</span>
                    Visit Site ↗
                    <span class="bracket text-2xl">)</span>
                </a>
            </div>

            <div class="md:w-7/12 z-10 flex flex-col">
                <div class="border-b border-white/20 pb-4 mb-4">
                    <p class="text-sm tracking-widest uppercase font-semibold">Corporate Website</p>
                </div>
                <div class="border-b border-white/20 pb-4 mb-10">
                    <p class="text-sm tracking-widest uppercase text-gray-400">REACT.JS • FIREBASE • CSS3</p>
                </div>

                <div
                    class="relative w-full aspect-video rounded-2xl overflow-hidden bg-black/50 group-hover:scale-[1.02] transition-transform duration-700">
                    <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1200&h=800&fit=crop"
                        class="w-full h-full object-cover opacity-80" alt="Corporate">
                </div>
            </div>
        </div>
    </section>

    <!-- About Me -->
    <section id="about" class="py-40 px-6 max-w-[1000px] mx-auto min-h-[80vh] flex flex-col justify-center">
        <h2 class="text-3xl md:text-5xl leading-tight font-normal mb-16">
            <span class="reveal-text-scrub">Motivated and detail-oriented aspiring Software Development Intern with a
                solid foundation in React Native and Python. Passionate about building <span
                    class="display-text italic">user-friendly</span> cross-platform applications and exploring <span
                    class="display-text italic">Generative AI</span> technologies.</span>
        </h2>
        <p class="text-xl md:text-2xl leading-relaxed font-normal">
            <span class="reveal-text-scrub reveal-text-scrub-2">Committed to clean coding, performance optimization,
                continuous learning, and effective teamwork to deliver impactful solutions. Completed a Virtual
                Internship at ServiceNow University gaining exposure to enterprise platforms and agentic AI.</span>
        </p>
    </section>

    <!-- Playground / Skills Section -->
    <section id="services" class="py-32 overflow-hidden bg-gray-900/40 border-t border-b border-white/5">
        <div class="px-6 mb-16 flex items-center justify-between max-w-[1400px] mx-auto">
            <span class="text-xs tracking-widest uppercase text-gray-400">View Options: &nbsp; Grid &nbsp; <span
                    class="text-white">( MARQUEE )</span></span>
        </div>

        <div class="w-full flex gap-6 overflow-hidden">
            <div class="marquee-track flex gap-6 px-3">
                <!-- Repeated blocks for scrolling -->
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-slate-800 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-slate-700 transition">
                    <h3 class="text-2xl display-text">React Native</h3>
                    <p class="text-sm text-gray-400">Cross-platform development</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-indigo-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-indigo-800/50 transition">
                    <h3 class="text-2xl display-text">Python</h3>
                    <p class="text-sm text-gray-400">Backend & Scripting</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-emerald-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-emerald-800/50 transition">
                    <h3 class="text-2xl display-text">MongoDB</h3>
                    <p class="text-sm text-gray-400">Database Management</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-rose-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-rose-800/50 transition">
                    <h3 class="text-2xl display-text">Generative AI</h3>
                    <p class="text-sm text-gray-400">Azure AI & Langchain</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-amber-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-amber-800/50 transition">
                    <h3 class="text-2xl display-text">SIH Finalist</h3>
                    <p class="text-sm text-gray-400">Hackathon Achievement</p>
                </div>

                <!-- Duplicate for seamless scroll -->
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-slate-800 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-slate-700 transition">
                    <h3 class="text-2xl display-text">React Native</h3>
                    <p class="text-sm text-gray-400">Cross-platform development</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-indigo-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-indigo-800/50 transition">
                    <h3 class="text-2xl display-text">Python</h3>
                    <p class="text-sm text-gray-400">Backend & Scripting</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-emerald-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-emerald-800/50 transition">
                    <h3 class="text-2xl display-text">MongoDB</h3>
                    <p class="text-sm text-gray-400">Database Management</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-rose-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-rose-800/50 transition">
                    <h3 class="text-2xl display-text">Generative AI</h3>
                    <p class="text-sm text-gray-400">Azure AI & Langchain</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-amber-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-amber-800/50 transition">
                    <h3 class="text-2xl display-text">SIH Finalist</h3>
                    <p class="text-sm text-gray-400">Hackathon Achievement</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="pt-32 pb-0 px-6 max-w-[1400px] mx-auto overflow-hidden">
        <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 border-b border-white/20 pb-20 mb-20 text-xs tracking-widest uppercase">
            <div class="flex flex-col gap-4">
                <a href="mailto:subin2023pecit326@gmail.com" class="hover:text-gray-400">subin2023pecit326@gmail.com</a>
                <a href="tel:+919884390646" class="hover:text-gray-400">+91 98843 90646</a>
                <a href="https://linkedin.com/in/subin-balakrishnan-53027" target="_blank"
                    class="hover:text-gray-400">LinkedIn</a>
            </div>

            <div class="flex flex-col gap-4 text-gray-400">
                <span>Location</span>
                <span class="text-white">Chennai, India</span>
            </div>

            <div class="flex flex-col gap-4 text-gray-400">
                <span>Navigation</span>
                <a href="#" class="text-white hover:text-gray-300">Back To Top</a>
            </div>

            <div class="flex flex-col gap-4 text-gray-400 lg:items-end">
                <span>Designed Based On Reference</span>
                <span class="text-white">Subin B</span>
            </div>
        </div>

        <div class="w-full text-center flex justify-center">
            <h1 class="footer-big display-text font-bold tracking-tighter mix-blend-screen opacity-90 leading-none">||
                Subin B ||</h1>
        </div>
    </footer>

    <script>
        /* ══════════════════════════════════════════════════════════════
           VANILLA JS — 3-Stage Intro Animation (no external libraries)
           Timeline:
             0.0s – 1.5s  Stage 1: Show "LOADING" with brackets
             1.5s – 3.5s  Stage 2: Linear number/symbol counter (rAF)
             3.5s – 5.0s  Stage 3: Expand brackets, reveal HELLO block
             5.0s – 5.7s  Fade out loader, unlock scroll
        ══════════════════════════════════════════════════════════════ */
        (function () {
            'use strict';

            /* ── Always start at the very top of the page on load/reload ── */
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual'; // stop browser restoring position
            }
            window.scrollTo(0, 0); // snap to top instantly

            /* Prevent page scroll during intro */
            document.body.classList.add('no-scroll');

            /* ── Element refs ─────────────────────────────────────── */
            const loader = document.getElementById('intro-loader');
            const label = document.getElementById('intro-label');
            const bracketL = document.getElementById('bracket-left');
            const bracketR = document.getElementById('bracket-right');
            const helloBlock = document.getElementById('intro-hello');
            const heroHello = document.getElementById('hero-hello');

            /* ── Character pool for stage 2 ──────────────────────── */
            const CHARS = '0123456789ABCDEF#@!%&*+=-><{}[]|~^';

            /* ── Stage 2: throttled rAF – one update every 80ms ──── */
            /*   Characters resolve left→right so it feels deliberate */
            function runCounter(duration, onDone) {
                const start = performance.now();
                const len = 8;     // total character slots
                let lastUpdate = 0;     // timestamp of last DOM write
                const INTERVAL = 80;    // ms between each update (smooth pace)

                /* Build the current string: resolved chars on the left,
                   still-scrambling chars on the right */
                const finalStr = '948944AF';  // what we "settle" on

                function tick(now) {
                    const elapsed = now - start;
                    const progress = Math.min(elapsed / duration, 1); // LINEAR 0→1

                    /* Only update DOM at the throttled interval */
                    if (now - lastUpdate >= INTERVAL) {
                        lastUpdate = now;

                        /* How many chars from the left are "resolved" */
                        const resolved = Math.floor(progress * len);

                        let display = '';
                        for (let i = 0; i < len; i++) {
                            if (i < resolved) {
                                /* Left side: locked to final char */
                                display += finalStr[i];
                            } else {
                                /* Right side: still scrambling (new rand each tick) */
                                display += CHARS[Math.floor(Math.random() * CHARS.length)];
                            }
                        }
                        label.textContent = display;
                    }

                    if (progress < 1) {
                        requestAnimationFrame(tick);
                    } else {
                        label.textContent = finalStr; // lock final value
                        onDone();
                    }
                }
                requestAnimationFrame(tick);
            }

            /* ── Stage 3: expand brackets + fly HELLO into hero ──── */
            function runReveal() {
                /* 1. Expand brackets outward */
                bracketL.style.transform = 'translateX(-3.5rem) scaleX(1.18)';
                bracketR.style.transform = 'translateX(3.5rem) scaleX(1.18)';

                /* 2. Fade out the scrambled label */
                label.style.opacity = '0';

                /* 3. Reveal loader's hello block fully in place (stays visible) */
                setTimeout(() => {
                    helloBlock.classList.add('visible');

                    /* 4. After hello is fully visible, measure positions & fly */
                    setTimeout(() => {

                        /* Force page to top so hero coords are always correct */
                        window.scrollTo(0, 0);

                        /* Small paint delay so scrollTo settles before measuring */
                        requestAnimationFrame(() => {
                            requestAnimationFrame(() => {

                                const fromRect = helloBlock.getBoundingClientRect();
                                const toRect = heroHello.getBoundingClientRect();

                                /* Pixel delta: center of source → center of target */
                                const dx = (toRect.left + toRect.width / 2)
                                    - (fromRect.left + fromRect.width / 2);
                                const dy = (toRect.top + toRect.height / 2)
                                    - (fromRect.top + fromRect.height / 2);

                                /* Scale ratio (hero block is smaller — never scale up) */
                                const scale = Math.min(
                                    toRect.width / fromRect.width,
                                    toRect.height / fromRect.height,
                                    1
                                );

                                /* Start moving — block stays FULLY OPAQUE during flight */
                                helloBlock.classList.add('joining');
                                helloBlock.style.transform =
                                    `translate(${dx}px, ${dy}px) scale(${scale})`;

                                /* When the 1.4 s travel is done, crossfade with hero */
                                setTimeout(() => {
                                    /* Reveal the real hero-hello underneath */
                                    heroHello.style.opacity = '1';

                                    /* Fade the flying block out as hero one fades in */
                                    helloBlock.style.transition = 'opacity 0.55s linear';
                                    helloBlock.style.opacity = '0';

                                    /* Fade the dark loader backdrop out simultaneously */
                                    loader.classList.add('done');

                                    /* Remove loader and unlock scroll after fade */
                                    setTimeout(() => {
                                        loader.style.display = 'none';
                                        document.body.classList.remove('no-scroll');
                                    }, 650);

                                }, 1450); // wait for transform travel to finish

                            }); // rAF double-flush
                        });

                    }, 900); // hello fully visible before it starts moving

                }, 350); // short delay after brackets expand
            }

            /* ── Orchestrate stages ───────────────────────────────── */

            /* Stage 1 → wait 1.5s, then begin Stage 2 */
            setTimeout(() => {

                /* Stage 2 → run counter for 2s, then Stage 3 */
                runCounter(2000, () => {
                    runReveal();
                });

            }, 1500);

        })();

        /* ══════════════════════════════════════════════════════════════
           GSAP — Scroll-Triggered Animations (page content)
        ══════════════════════════════════════════════════════════════ */
        gsap.registerPlugin(ScrollTrigger);

        // 1. Initialize Lenis (Smooth Scrolling)
        const lenis = new Lenis({
            duration: 1.2,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            direction: 'vertical',
            gestureDirection: 'vertical',
            smooth: true,
            smoothTouch: false,
            autoRaf: true
        });

        // Sync Lenis with GSAP ScrollTrigger
        lenis.on('scroll', ScrollTrigger.update);
        gsap.ticker.add((time) => {
            lenis.raf(time * 1000);
        });
        gsap.ticker.lagSmoothing(0);

        // 2. Hero Section Animations (Parallax outwards)
        gsap.to('.hero-left', {
            xPercent: -50,
            ease: "none",
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });

        gsap.to('.hero-right', {
            xPercent: 50,
            ease: "none",
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });
        gsap.to('#hero-img-wrap', {
            scale: 2.8,
            borderRadius: 0,
            ease: "none",
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });
        gsap.to('.hero-img', {
            scale: 1.08,        /* subtle inner zoom so it doesn't look static */
            ease: "none",
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });

        // 2b. Hero IMAGE EXPANSION — clip-path scrub (GPU composited, zero reflow)
        //     #hero-img-wrap is absolute inside the 200vh hero section.
        //     clip-path opens from a small centre strip → full section width.
        const imgWrap = document.getElementById('hero-img-wrap');

        gsap.to(imgWrap, {
            clipPath: 'inset(0% 0% round 0px)',
            ease: 'none',
            scrollTrigger: {
                trigger: '#hero',
                start: 'top top',
                end: 'center top',
                scrub: 1.5
            }
        });

        // Subtle inner-image pan (Ken Burns feel while expanding)
        gsap.fromTo('.hero-img',
            { scale: 1.12 },
            {
                scale: 1.01,
                ease: 'none',
                scrollTrigger: {
                    trigger: '#hero',
                    start: 'top top',
                    end: 'center top',
                    scrub: 1.5
                }
            }
        );

        // 3. Project Cards Stacking Animation
        const cards = gsap.utils.toArray('.project-card');
        cards.forEach((card, i) => {
            if (i === cards.length - 1) return; // Skip the last card
            gsap.to(card, {
                scale: 0.95,
                opacity: 0.5,
                ease: 'none',
                scrollTrigger: {
                    trigger: cards[i + 1],
                    start: 'top bottom',
                    end: 'top top',
                    scrub: true
                }
            });
        });

        // 4. Scrub Text Reveal (Continuous Background Scrub)
        gsap.to('.reveal-text-scrub', {
            backgroundPosition: '0% 0',
            ease: "none",
            scrollTrigger: {
                trigger: "#about",
                start: "top 80%",
                end: "center 40%",
                scrub: 1
            }
        });

        gsap.to('.reveal-text-scrub-2', {
            backgroundPosition: '0% 0',
            ease: "none",
            scrollTrigger: {
                trigger: "#about p",
                start: "top 80%",
                end: "bottom 60%",
                scrub: 1
            }
        });

        // 5. Footer Giant Text Parallax Reveal
        gsap.fromTo('.footer-big',
            { yPercent: 60, opacity: 0 },
            {
                yPercent: 0,
                opacity: 1,
                ease: "none",
                scrollTrigger: {
                    trigger: "footer",
                    start: "top bottom",
                    end: "bottom bottom",
                    scrub: true
                }
            }
        );
    </script>
</body>

</html>