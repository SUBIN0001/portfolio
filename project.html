<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280">
    <title>Subin B - Software Developer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/lenis@1.1.18/dist/lenis.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital,wght@0,600;0,700;1,600&display=swap"
        rel="stylesheet">

    <style>
        /* ─── RESET & ROOT ─────────────────────────────────────────── */
        :root {
            --bg: #0f1218;
            --text: #f5f5f5;
        }

        * {
            cursor: none !important;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Restore normal cursor on touch devices */
        @media (hover: none) and (pointer: coarse) {
            * {
                cursor: auto !important;
            }
        }

        html.lenis,
        html.lenis body {
            height: auto;
        }

        .lenis.lenis-smooth {
            scroll-behavior: auto !important;
        }

        .lenis.lenis-stopped {
            overflow: hidden;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .no-scroll {
            overflow: hidden;
        }

        /* ─── CUSTOM CURSOR ─────────────────────────────────────────── */
        #cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
        }

        #cursor-ring {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9998;
            width: 36px;
            height: 36px;
            border: 1.5px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, border-color 0.3s;
        }

        body:has(a:hover) #cursor-ring,
        body:has(button:hover) #cursor-ring {
            width: 52px;
            height: 52px;
            border-color: #fff;
        }

        /* ─── SCROLL PROGRESS ───────────────────────────────────────── */
        #progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 2px;
            background: white;
            z-index: 9997;
            width: 0%;
        }

        /* ─── INTRO LOADER ──────────────────────────────────────────── */
        #intro-loader {
            position: fixed;
            inset: 0;
            z-index: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #0b1220;
            opacity: 0;
            animation: loaderFadeIn 0.6s linear 0.1s forwards;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        #intro-center {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: clamp(1.5rem, 6vw, 5rem);
            width: 100%;
            padding: 0 2rem;
        }

        .intro-bracket {
            font-size: clamp(4rem, 12vw, 9rem);
            font-weight: 200;
            color: #fff;
            line-height: 1;
            display: inline-block;
            will-change: transform;
            transition: transform 1.5s linear, opacity 1.5s linear;
        }

        #intro-label {
            font-size: clamp(1.2rem, 4vw, 2.8rem);
            font-weight: 500;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            color: #fff;
            min-width: clamp(8rem, 20vw, 22rem);
            text-align: center;
            transition: opacity 0.4s linear;
        }

        #intro-hello {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
            padding: 0 1rem;
            opacity: 0;
            transform: scale(0.92);
            transition: opacity 1.2s linear, transform 1.2s linear;
            pointer-events: none;
        }

        #intro-hello.visible {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }

        #intro-hello .hello-tag {
            font-size: clamp(0.6rem, 1.5vw, 0.75rem);
            letter-spacing: 0.35em;
            text-transform: uppercase;
            font-weight: 700;
            color: #fff;
        }

        #intro-hello .hello-sub {
            font-size: clamp(0.85rem, 2vw, 1.1rem);
            color: #9ca3af;
            max-width: 22rem;
            line-height: 1.6;
        }

        #intro-loader.done {
            opacity: 0;
            transition: opacity 0.6s linear;
            pointer-events: none;
        }

        #intro-hello.joining {
            transition: transform 1.4s linear;
        }

        #hero-hello {
            transition: opacity 0.5s linear;
        }

        @keyframes loaderFadeIn {
            to {
                opacity: 1;
            }
        }

        /* ─── NAV ────────────────────────────────────────────────────── */
        nav a {
            position: relative;
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: white;
            transition: width 0.3s;
        }

        nav a:hover::after {
            width: 100%;
        }

        /* ─── MOBILE MENU ────────────────────────────────────────────── */
        #mobile-menu {
            position: fixed;
            inset: 0;
            z-index: 49;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s;
        }

        #mobile-menu.open {
            opacity: 1;
            pointer-events: auto;
        }

        #mobile-menu a {
            font-size: 2rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: white;
        }

        #hamburger {
            position: relative;
            z-index: 51;
        }

        #hamburger span {
            display: block;
            width: 2rem;
            height: 1px;
            background: white;
            margin: 6px 0;
            transition: transform 0.3s, opacity 0.3s;
        }

        #hamburger.open span:nth-child(1) {
            transform: translateY(7px) rotate(45deg);
        }

        #hamburger.open span:nth-child(2) {
            opacity: 0;
        }

        #hamburger.open span:nth-child(3) {
            transform: translateY(-7px) rotate(-45deg);
        }

        #hamburger.open span:nth-child(4) {
            opacity: 0;
        }

        /* ─── TYPE STYLES ────────────────────────────────────────────── */
        .display-text {
            font-family: 'Playfair Display', serif;
        }

        .bracket {
            font-size: 3rem;
            font-weight: 300;
            line-height: 1;
        }

        .hero-big {
            font-size: clamp(4rem, 15vw, 15rem);
            line-height: 0.9;
        }

        /* ─── HERO LAYOUT ────────────────────────────────────────────── */
        #hero {
            position: relative;
            min-height: 100vh;
        }

        #hero-frame {
            position: relative;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 5rem 1rem 2.5rem;
            z-index: 10;
        }

        .hero-row {
            position: relative;
            z-index: 10;
        }

        #hero-img-wrap {
            position: fixed;
            border-radius: 1.2rem;
            overflow: hidden;
            z-index: 5;
            pointer-events: none;
            will-change: top, left, width, height, border-radius;
        }

        #hero-img-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* ─── PROJECTS ───────────────────────────────────────────────── */
        .project-section {
            background: linear-gradient(135deg, #1a1c23 0%, #111216 100%);
            border-radius: 2rem;
            transform-origin: top center;
        }

        /* ─── MARQUEE ────────────────────────────────────────────────── */
        .marquee-track {
            display: flex;
            width: fit-content;
            animation: marquee 20s linear infinite;
        }

        .marquee-track:hover {
            animation-play-state: paused;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* ─── SCRUB TEXT REVEAL ──────────────────────────────────────── */
        .reveal-text-scrub,
        .reveal-text-scrub-2 {
            background: linear-gradient(to right, white 50%, rgba(255, 255, 255, 0.15) 50%);
            background-size: 200% 100%;
            background-position: 100% 0;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline;
        }

        /* ─── FOOTER ─────────────────────────────────────────────────── */
        .footer-big {
            font-size: clamp(4rem, 18vw, 20rem);
            white-space: nowrap;
        }

        /* ─── CARD DECK SECTION ────────────────────────────── */
        #card-deck-section {
            padding: 8rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4rem;
            background: linear-gradient(180deg, transparent 0%, rgba(255, 255, 255, .02) 100%);
            border-top: 1px solid rgba(255, 255, 255, .06);
        }

        .deck-label {
            font-size: .65rem;
            letter-spacing: .35em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, .4);
        }

        .deck-heading {
            font-size: clamp(2rem, 6vw, 4.5rem);
            font-family: 'Playfair Display', serif;
            text-align: center;
            line-height: 1.1;
            color: #fff;
        }

        #cardDeck {
            position: relative;
            width: min(340px, 88vw);
            height: 480px;
            cursor: grab;
            touch-action: none;
        }

        #cardDeck:active {
            cursor: grabbing;
        }

        .deck-card {
            position: absolute;
            top: 50%;
            left: 50%;
            width: min(320px, 82vw);
            height: 440px;
            border-radius: 1.5rem;
            overflow: hidden;
            background: #141820;
            box-shadow: 0 8px 40px rgba(0, 0, 0, .55);
            user-select: none;
            display: flex;
            flex-direction: column;
        }

        .deck-card.is-active {
            box-shadow: 0 20px 60px rgba(0, 0, 0, .7);
        }

        .card-img-wrap {
            flex: 1;
            overflow: hidden;
        }

        .card-img-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(.7) saturate(.8);
            transition: filter .4s;
            pointer-events: none;
            -webkit-user-drag: none;
        }

        .deck-card.is-active .card-img-wrap img {
            filter: brightness(.85) saturate(1);
        }

        .card-body {
            padding: 1.4rem 1.6rem 1.6rem;
            flex-shrink: 0;
            background: linear-gradient(180deg, rgba(14, 18, 28, 0) 0%, rgba(10, 14, 22, 1) 100%);
        }

        .card-title-el {
            font-size: 1.45rem;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            margin-bottom: .5rem;
            color: #fff;
        }

        .card-desc-el {
            font-size: .82rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, .5);
        }

        .line-mask {
            display: block;
            overflow: hidden;
        }

        .line-inner {
            display: block;
            transform: translateY(105%);
            transition: transform .5s cubic-bezier(.22, 1, .36, 1);
        }

        .deck-card.is-active .line-inner {
            transform: translateY(0);
        }

        .deck-controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .deck-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, .18);
            background: rgba(255, 255, 255, .05);
            color: #fff;
            font-size: 1.1rem;
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: background .2s, border-color .2s;
        }

        .deck-btn:hover {
            background: rgba(255, 255, 255, .12);
            border-color: rgba(255, 255, 255, .4);
        }

        #deckDots {
            display: flex;
            gap: .5rem;
            align-items: center;
        }

        .deck-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 255, 255, .25);
            cursor: pointer;
            transition: background .25s, transform .25s;
        }

        .deck-dot.is-active {
            background: #fff;
            transform: scale(1.3);
        }

        /* ─── HERO WORD MASK ─────────────────────────────────────────── */
        .hero-word-mask {
            overflow: hidden;
            display: inline-block;
            line-height: 0.92;
        }

        .hero-word-mask>h1 {
            transform: translateY(115%);
            opacity: 0;
            display: block;
        }

        /* ─── FOOTER MARQUEE ─────────────────────────────────────────── */
        .footer-marquee-outer {
            width: 100vw;
            position: relative;
            left: 50%;
            right: 50%;
            margin-left: -50vw;
            margin-right: -50vw;
            overflow: hidden;
            line-height: 1;
        }

        .footer-marquee-track {
            display: flex;
            width: max-content;
            animation: footerScroll 12s linear infinite paused;
        }

        .footer-marquee-track:hover {
            animation-play-state: paused;
        }

        @keyframes footerScroll {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-33.333%);
            }
        }

        .footer-marquee-item {
            font-family: 'Playfair Display', serif;
            font-size: clamp(4.5rem, 18vw, 18rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            white-space: nowrap;
            padding-right: clamp(1.5rem, 5vw, 5rem);
            color: #fff;
            mix-blend-mode: difference;
            opacity: 0;
            transform: translateY(35%);
        }

        /* ─── HERO TITLE GLOW ────────────────────────────────────────── */
        .content-wrapper {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .title-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1400px;
            padding: 0 2.5rem;
        }

        .creative-wrapper,
        .dev-wrapper {
            display: inline-block;
        }

        .creative-text,
        .dev-text {
            font-family: 'Playfair Display', serif;
            font-size: clamp(4rem, 15vw, 15rem);
            line-height: 0.9;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: #fff;
            display: block;
            text-shadow:
                #f5e642 calc(var(--shadow-width, 0px)*-1) 0px,
                #f5e642 calc(var(--shadow-width, 0px)*-.95) calc(var(--shadow-width, 0px)*-.31),
                #f5e642 calc(var(--shadow-width, 0px)*-.81) calc(var(--shadow-width, 0px)*-.59),
                #f5e642 calc(var(--shadow-width, 0px)*-.59) calc(var(--shadow-width, 0px)*-.81),
                #f5e642 calc(var(--shadow-width, 0px)*-.31) calc(var(--shadow-width, 0px)*-.95),
                #f5e642 0px calc(var(--shadow-width, 0px)*-1),
                #f5e642 calc(var(--shadow-width, 0px)*.31) calc(var(--shadow-width, 0px)*-.95),
                #f5e642 calc(var(--shadow-width, 0px)*.59) calc(var(--shadow-width, 0px)*-.81),
                #f5e642 calc(var(--shadow-width, 0px)*.81) calc(var(--shadow-width, 0px)*-.59),
                #f5e642 calc(var(--shadow-width, 0px)*.95) calc(var(--shadow-width, 0px)*-.31),
                #f5e642 var(--shadow-width, 0px) 0px,
                #f5e642 calc(var(--shadow-width, 0px)*.95) calc(var(--shadow-width, 0px)*.31),
                #f5e642 calc(var(--shadow-width, 0px)*.81) calc(var(--shadow-width, 0px)*.59),
                #f5e642 calc(var(--shadow-width, 0px)*.59) calc(var(--shadow-width, 0px)*.81),
                #f5e642 calc(var(--shadow-width, 0px)*.31) calc(var(--shadow-width, 0px)*.95),
                #ebda28 0px var(--shadow-width, 0px),
                #ebda28 calc(var(--shadow-width, 0px)*-.31) calc(var(--shadow-width, 0px)*.95),
                #ebda28 calc(var(--shadow-width, 0px)*-.59) calc(var(--shadow-width, 0px)*.81),
                #ebda28 calc(var(--shadow-width, 0px)*-.81) calc(var(--shadow-width, 0px)*.59),
                #ebda28 calc(var(--shadow-width, 0px)*-.95) calc(var(--shadow-width, 0px)*.31);
            will-change: text-shadow;
        }

        /* ─── TYPEWRITER CURSOR ──────────────────────────────────────── */
        /* Blinking | cursor after the typed text above "Developer" */
        #text-eloper::after {
            content: '|';
            display: inline-block;
            margin-left: 2px;
            color: rgba(255, 255, 255, 0.6);
            animation: twBlink 0.75s step-end infinite;
        }

        @keyframes twBlink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }
    </style>
</head>

<body class="antialiased selection:bg-white selection:text-black">

    <!-- Cursor -->
    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <!-- Progress bar -->
    <div id="progress-bar"></div>

    <!-- ══ Intro Loader ══ -->
    <div id="intro-loader" aria-label="Loading" role="status">
        <div id="intro-center">
            <span class="intro-bracket" id="bracket-left">(</span>
            <span id="intro-label">LOADING</span>
            <span class="intro-bracket" id="bracket-right">)</span>
        </div>
        <div id="intro-hello">
            <span class="hello-tag">Hello!</span>
            <p class="hello-sub">I'm Subin B, a software development intern. Welcome to my portfolio!</p>
        </div>
    </div>

    <!-- Nav -->
    <nav
        class="fixed top-0 left-0 w-full z-50 px-6 py-8 mix-blend-difference flex justify-between items-center text-sm tracking-widest uppercase">
        <a href="#" class="font-bold text-lg hidden md:block">|| Subin B ||</a>
        <div class="hidden md:flex gap-12 font-medium">
            <a href="#projects">Projects</a>
            <a href="#about">About Me</a>
            <a href="#services">Skills</a>
            <a href="#contact">Contact</a>
        </div>
        <div id="hamburger" class="md:hidden flex flex-col gap-1.5">
            <span></span><span></span><span></span><span></span>
        </div>
    </nav>

    <!-- Mobile menu -->
    <div id="mobile-menu">
        <a href="#projects" class="mobile-link">Projects</a>
        <a href="#about" class="mobile-link">About Me</a>
        <a href="#services" class="mobile-link">Skills</a>
        <a href="#contact" class="mobile-link">Contact</a>
    </div>

    <!-- ══ HERO ══ -->
    <section id="hero">

        <div id="hero-img-wrap">
            <img id="hero-img" src="IMG_20260105_222632.jpg.jpg" alt="Subin B"
                onerror="this.src='https://images.unsplash.com/photo-1607799279861-4dd421887fb3?w=1200&h=1200&fit=crop&crop=face'">
        </div>

        <div id="hero-frame">

            <div id="hero-hello" class="hero-row flex items-center gap-6 mb-12 text-center" style="opacity:0;">
                <span class="bracket">(</span>
                <div class="flex flex-col items-center gap-3">
                    <span class="text-xs uppercase tracking-[0.3em] font-bold">Hello!</span>
                    <p class="max-w-xs text-base md:text-lg text-gray-300">
                        I'm Subin B, an Enthusiastic software developer . Welcome to my portfolio!
                    </p>
                </div>
                <span class="bracket">)</span>
            </div>

            <div id="hero-text-row" class="hero-row content-wrapper">
                <div class="title-content" aria-label="Software Developer" style="--shadow-width: 0px;">

                    <!-- Left word + typewriter label stacked above it -->
                    <div class="creative-wrapper"
                        style="display:flex; flex-direction:column; align-items:flex-start; gap:0.2em;">
                        <!-- Typewriter sits above "Developer" -->
                        <span id="text-eloper" style="
                            font-family: 'Playfair Display', serif;
                            font-style: italic;
                            font-size: clamp(1.9rem, 4.5vw, 4rem);
                            font-weight: 600;
                            color: white;
                            letter-spacing: 0.1em;
                            line-height: 1;
                            min-height: 1.2em;
                            display: block;
                        "></span>
                        <!-- Big "Developer" word -->
                        <span class="creative-text" id="text-dev">Developer</span>
                    </div>

                    <!-- Gap where the image overlay lives -->
                    <div id="hero-img-gap" style="width: 18vw; aspect-ratio: 2/3; flex-shrink: 0;"></div>

                    <!-- Right side (empty) -->
                    <div class="dev-wrapper"></div>

                </div>
            </div>

        </div>
    </section>

    <!-- ══ Projects ══ -->
    <section id="projects" class="py-20 px-6 md:px-8 max-w-[1600px] mx-auto relative">

        <div
            class="project-card project-section p-8 md:p-16 flex flex-col md:flex-row gap-16 mb-24 md:mb-64 overflow-hidden relative group sticky top-24 max-w-[1200px] mx-auto">
            <div class="md:w-5/12 z-10">
                <p class="text-xs tracking-widest uppercase mb-2 text-gray-400">PROJECT 01</p>
                <h2 class="text-5xl md:text-7xl mb-8 display-text leading-tight text-white">Language Agnostic<br>Chatbot
                </h2>
                <p class="text-gray-400 text-lg leading-relaxed mb-10 max-w-sm">
                    A scalable multilingual chatbot with n8n workflow automation. Integrated REST APIs and Pinecone
                    vector database for semantic data handling. Designed with MongoDB and React.js.
                </p>
                <a href="#"
                    class="inline-flex items-center gap-4 text-sm tracking-widest uppercase hover:text-gray-300 transition-colors">
                    <span class="bracket text-2xl">(</span> <span class="bracket text-2xl">)</span>
                </a>
            </div>
            <div class="md:w-7/12 z-10 flex flex-col">
                <div class="border-b border-white/20 pb-4 mb-4">
                    <p class="text-sm tracking-widest uppercase font-semibold">SIH Finalist Project</p>
                </div>
                <div class="border-b border-white/20 pb-4 mb-10">
                    <p class="text-sm tracking-widest uppercase text-gray-400">PYTHON • MONGO DB • REACT.JS • LANGCHAIN
                    </p>
                </div>
                <div
                    class="relative w-full aspect-video rounded-2xl overflow-hidden bg-black/50 group-hover:scale-[1.02] transition-transform duration-700">
                    <img src="https://images.unsplash.com/photo-1677442136019-21780ecad995?w=1200&h=800&fit=crop"
                        class="w-full h-full object-cover opacity-80" alt="Chatbot">
                </div>
            </div>
        </div>

        <div
            class="project-card project-section p-8 md:p-16 flex flex-col md:flex-row gap-16 overflow-hidden relative group sticky top-20 mb-32 z-10 shadow-[0_-10px_30px_rgba(0,0,0,0.5)] max-w-[1200px] mx-auto">
            <div class="md:w-5/12 z-10">
                <p class="text-xs tracking-widest uppercase mb-2 text-gray-400">PROJECT 02</p>
                <h2 class="text-5xl md:text-7xl mb-8 display-text leading-tight text-white">FRAEMI<br>Vision</h2>
                <p class="text-gray-400 text-lg leading-relaxed mb-10 max-w-sm">
                    A responsive corporate website emphasizing performance, usability, and clean design.
                    Features custom UI enhancements, showcase pages, and seamless Firebase integration.
                </p>
                <a href="#"
                    class="inline-flex items-center gap-4 text-sm tracking-widest uppercase hover:text-gray-300 transition-colors">
                    <span class="bracket text-2xl">(</span> <span class="bracket text-2xl">)</span>
                </a>
            </div>
            <div class="md:w-7/12 z-10 flex flex-col">
                <div class="border-b border-white/20 pb-4 mb-4">
                    <p class="text-sm tracking-widest uppercase font-semibold">Corporate Website</p>
                </div>
                <div class="border-b border-white/20 pb-4 mb-10">
                    <p class="text-sm tracking-widest uppercase text-gray-400">REACT.JS • FIREBASE • CSS3</p>
                </div>
                <div
                    class="relative w-full aspect-video rounded-2xl overflow-hidden bg-black/50 group-hover:scale-[1.02] transition-transform duration-700">
                    <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1200&h=800&fit=crop"
                        class="w-full h-full object-cover opacity-80" alt="Corporate">
                </div>
            </div>
        </div>
    </section>

    <!-- ══ About ══ -->
    <section id="about" class="py-40 px-6 max-w-[1000px] mx-auto min-h-[80vh] flex flex-col justify-center">
        <h2 class="text-3xl md:text-5xl leading-tight font-normal mb-16">
            <span class="reveal-text-scrub">Motivated and detail-oriented aspiring Software Development Intern with a
                solid foundation in React Native and Python. Passionate about building
                <span class="display-text italic">user-friendly</span> cross-platform applications and exploring
                <span class="display-text italic">Generative AI</span> technologies.</span>
        </h2>
        <p class="text-xl md:text-2xl leading-relaxed font-normal">
            <span class="reveal-text-scrub reveal-text-scrub-2">Committed to clean coding, performance optimization,
                continuous learning, and effective teamwork to deliver impactful solutions. Completed a Virtual
                Internship at ServiceNow University gaining exposure to enterprise platforms and agentic AI.</span>
        </p>
    </section>

    <!-- ══ Skills Marquee ══ -->
    <section id="services" class="py-32 overflow-hidden bg-gray-900/40 border-t border-b border-white/5">
        <div class="px-6 mb-16 flex items-center justify-between max-w-[1400px] mx-auto">
            <span class="text-xs tracking-widest uppercase text-gray-400">View Options: &nbsp;
                <span class="text-white">( MARQUEE )</span></span>
        </div>
        <div class="w-full flex gap-6 overflow-hidden">
            <div class="marquee-track flex gap-6 px-3">
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-slate-800 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-slate-700 transition">
                    <h3 class="text-2xl display-text">React Native</h3>
                    <p class="text-sm text-gray-400">Cross-platform development</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-indigo-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-indigo-800/50 transition">
                    <h3 class="text-2xl display-text">Python</h3>
                    <p class="text-sm text-gray-400">Backend & Scripting</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-emerald-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-emerald-800/50 transition">
                    <h3 class="text-2xl display-text">MongoDB</h3>
                    <p class="text-sm text-gray-400">Database Management</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-rose-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-rose-800/50 transition">
                    <h3 class="text-2xl display-text">Generative AI</h3>
                    <p class="text-sm text-gray-400">Azure AI & Langchain</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-amber-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-amber-800/50 transition">
                    <h3 class="text-2xl display-text">SIH Finalist</h3>
                    <p class="text-sm text-gray-400">Hackathon Achievement</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-violet-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-violet-800/50 transition">
                    <h3 class="text-2xl display-text">Firebase</h3>
                    <p class="text-sm text-gray-400">Backend as a Service</p>
                </div>
                <!-- Duplicate for seamless loop -->
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-slate-800 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-slate-700 transition">
                    <h3 class="text-2xl display-text">React Native</h3>
                    <p class="text-sm text-gray-400">Cross-platform development</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-indigo-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-indigo-800/50 transition">
                    <h3 class="text-2xl display-text">Python</h3>
                    <p class="text-sm text-gray-400">Backend & Scripting</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-emerald-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-emerald-800/50 transition">
                    <h3 class="text-2xl display-text">MongoDB</h3>
                    <p class="text-sm text-gray-400">Database Management</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-rose-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-rose-800/50 transition">
                    <h3 class="text-2xl display-text">Generative AI</h3>
                    <p class="text-sm text-gray-400">Azure AI & Langchain</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-amber-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-amber-800/50 transition">
                    <h3 class="text-2xl display-text">SIH Finalist</h3>
                    <p class="text-sm text-gray-400">Hackathon Achievement</p>
                </div>
                <div
                    class="w-[300px] md:w-[400px] h-[250px] bg-violet-900/40 rounded-3xl p-8 flex flex-col justify-between shrink-0 hover:bg-violet-800/50 transition">
                    <h3 class="text-2xl display-text">Firebase</h3>
                    <p class="text-sm text-gray-400">Backend as a Service</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ══ Card Deck — About Me ══ -->
    <section id="card-deck-section">
        <p class="deck-label">About Me</p>
        <h2 class="deck-heading">A few things<br>about me</h2>
        <div id="cardDeck" role="region" aria-label="About me cards"></div>
        <div class="deck-controls">
            <button class="deck-btn" id="deckPrev" aria-label="Previous card">←</button>
            <div id="deckDots" role="tablist" aria-label="Card navigation"></div>
            <button class="deck-btn" id="deckNext" aria-label="Next card">→</button>
        </div>
    </section>

    <!-- ══ Footer / Contact ══ -->
    <footer id="contact" class="pt-32 pb-0 px-6 max-w-[1400px] mx-auto overflow-hidden">
        <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 border-b border-white/20 pb-20 mb-20 text-xs tracking-widest uppercase">
            <div class="flex flex-col gap-4">
                <a href="mailto:subin2023pecit326@gmail.com"
                    class="hover:text-gray-400 transition-colors">subinb@example.com</a>
                <a href="tel:+919884390646" class="hover:text-gray-400 transition-colors">+91 98843 90646</a>
                <a href="https://www.linkedin.com/in/subin-balakrishnan-530274293/" target="_blank"
                    class="hover:text-gray-400 transition-colors">LinkedIn</a>
            </div>
            <div class="flex flex-col gap-4 text-gray-400">
                <span>Location</span><span class="text-white">Chennai, India</span>
            </div>
            <div class="flex flex-col gap-4 text-gray-400">
                <span>Navigation</span>
                <a href="#" id="back-to-top" class="text-white hover:text-gray-300 transition-colors">Back To Top</a>
            </div>
            <div class="flex flex-col gap-4 text-gray-400 lg:items-end">
                <span>Designed Based On Reference</span>
                <span class="text-white">Subin B</span>
            </div>
        </div>
        <div class="w-full text-center flex justify-center pb-0">
            <h1 class="footer-big display-text font-bold tracking-tighter mix-blend-screen opacity-90 leading-none">||
                Subin B ||</h1>
        </div>
    </footer>

    <script>
        /* ════════════════════════════════════════════════════════════════
           CURSOR
        ════════════════════════════════════════════════════════════════ */
        const dot = document.getElementById('cursor-dot');
        const ring = document.getElementById('cursor-ring');
        let mx = 0, my = 0, rx = 0, ry = 0;
        document.addEventListener('mousemove', e => {
            mx = e.clientX; my = e.clientY;
            dot.style.left = mx + 'px'; dot.style.top = my + 'px';
        });
        (function loopRing() {
            rx += (mx - rx) * 0.12; ry += (my - ry) * 0.12;
            ring.style.left = rx + 'px'; ring.style.top = ry + 'px';
            requestAnimationFrame(loopRing);
        })();

        /* ════════════════════════════════════════════════════════════════
           HAMBURGER
        ════════════════════════════════════════════════════════════════ */
        const hamburger = document.getElementById('hamburger');
        const mobileMenu = document.getElementById('mobile-menu');
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('open');
            mobileMenu.classList.toggle('open');
            document.body.classList.toggle('no-scroll');
        });
        document.querySelectorAll('.mobile-link').forEach(l => l.addEventListener('click', () => {
            hamburger.classList.remove('open');
            mobileMenu.classList.remove('open');
            document.body.classList.remove('no-scroll');
        }));

        /* ════════════════════════════════════════════════════════════════
           PROGRESS BAR
        ════════════════════════════════════════════════════════════════ */
        const progressBar = document.getElementById('progress-bar');
        window.addEventListener('scroll', () => {
            progressBar.style.width = (window.scrollY / (document.body.scrollHeight - innerHeight) * 100) + '%';
        });

        /* ════════════════════════════════════════════════════════════════
           BACK TO TOP
        ════════════════════════════════════════════════════════════════ */
        document.getElementById('back-to-top').addEventListener('click', e => {
            e.preventDefault(); window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        /* ════════════════════════════════════════════════════════════════
           INTRO LOADER  (3-stage)
        ════════════════════════════════════════════════════════════════ */
        (function () {
            'use strict';
            if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
            window.scrollTo(0, 0);
            document.body.classList.add('no-scroll');

            const loader = document.getElementById('intro-loader');
            const label = document.getElementById('intro-label');
            const bracketL = document.getElementById('bracket-left');
            const bracketR = document.getElementById('bracket-right');
            const helloBlock = document.getElementById('intro-hello');
            const heroHello = document.getElementById('hero-hello');
            const CHARS = '0123456789ABCDEF#@!%&*+=-><{}[]|~^';

            function runCounter(duration, onDone) {
                const start = performance.now();
                const len = 8, INTERVAL = 80;
                const finalStr = '948944AF';
                let lastUpdate = 0;
                function tick(now) {
                    const progress = Math.min((now - start) / duration, 1);
                    if (now - lastUpdate >= INTERVAL) {
                        lastUpdate = now;
                        const resolved = Math.floor(progress * len);
                        let d = '';
                        for (let i = 0; i < len; i++)
                            d += i < resolved ? finalStr[i] : CHARS[Math.floor(Math.random() * CHARS.length)];
                        label.textContent = d;
                    }
                    if (progress < 1) requestAnimationFrame(tick);
                    else { label.textContent = finalStr; onDone(); }
                }
                requestAnimationFrame(tick);
            }

            function runReveal() {
                /* ── Stage 3: brackets + label move TOGETHER as one unit ──
                   #intro-center (the whole row) scales up & fades out,
                   while #intro-hello rises into view below it.          */

                const center = document.getElementById('intro-center');

                /* 1. Fade label text to 0 first (fast) */
                label.style.transition = 'opacity 0.25s linear';
                label.style.opacity = '0';

                /* 2. After label fades, morph center row (brackets included)
                      — scale up slightly and fade while Hello appears        */
                setTimeout(() => {
                    center.style.transition = 'transform 0.8s cubic-bezier(.4,0,.2,1), opacity 0.7s linear';
                    center.style.transform = 'scale(1.25)';
                    center.style.opacity = '0';

                    /* 3. Reveal HELLO block */
                    helloBlock.classList.add('visible');

                    /* 4. After hello is fully visible, fly it into the hero */
                    setTimeout(() => {
                        window.scrollTo(0, 0);
                        requestAnimationFrame(() => requestAnimationFrame(() => {
                            const fr = helloBlock.getBoundingClientRect();
                            const tr = heroHello.getBoundingClientRect();
                            const dx = (tr.left + tr.width / 2) - (fr.left + fr.width / 2);
                            const dy = (tr.top + tr.height / 2) - (fr.top + fr.height / 2);
                            const sc = Math.min(tr.width / fr.width, tr.height / fr.height, 1);
                            helloBlock.classList.add('joining');
                            helloBlock.style.transform = `translate(${dx}px,${dy}px) scale(${sc})`;
                            setTimeout(() => {
                                heroHello.style.opacity = '1';
                                helloBlock.style.transition = 'opacity 0.55s linear';
                                helloBlock.style.opacity = '0';
                                loader.classList.add('done');
                                setTimeout(() => {
                                    loader.style.display = 'none';
                                    document.body.classList.remove('no-scroll');
                                    /* ── Start typewriter once loader is fully gone ── */
                                    startTypewriter();
                                }, 650);
                            }, 1450);
                        }));
                    }, 900);
                }, 280);
            }

            setTimeout(() => runCounter(2000, runReveal), 1500);
        })();

        /* ════════════════════════════════════════════════════════════════
           TYPEWRITER  — "Website" → backspace → "Software"
           Called by the intro loader once it finishes hiding.
           Target: #text-eloper  (the right-side hero word, starts empty)

           Sequence:
             1. Type  "Website"  letter by letter  (95 ms/char)
             2. Pause 1.2 s so the viewer reads it
             3. Backspace each letter               (55 ms/char — feels snappier)
             4. Type  "Software" letter by letter   (95 ms/char)
             5. Blinking | cursor stays via CSS ::after
        ════════════════════════════════════════════════════════════════ */
        function startTypewriter() {
            const el = document.getElementById('text-eloper');
            if (!el) return;

            const WORD1 = 'Website';
            const WORD2 = 'Software';
            const TYPE_MS = 95;   /* ms per character typed              */
            const BACK_MS = 55;   /* ms per character deleted (faster)   */
            const PAUSE_MS = 1200; /* pause after fully typing WORD1      */

            /* Type characters one by one, then call cb */
            function typeWord(word, i, cb) {
                el.textContent = word.slice(0, i);
                if (i >= word.length) { cb(); return; }
                setTimeout(() => typeWord(word, i + 1, cb), TYPE_MS);
            }

            /* Delete characters one by one from the end, then call cb */
            function eraseWord(word, i, cb) {
                el.textContent = word.slice(0, i);
                if (i <= 0) { cb(); return; }
                setTimeout(() => eraseWord(word, i - 1, cb), BACK_MS);
            }

            /* Full sequence */
            typeWord(WORD1, 0, () => {                  /* 1. type "Website"   */
                setTimeout(() => {                       /* 2. pause            */
                    eraseWord(WORD1, WORD1.length, () => { /* 3. erase it      */
                        typeWord(WORD2, 0, () => {          /* 4. type "Software" */
                            /* done — CSS ::after keeps the blinking cursor */
                        });
                    });
                }, PAUSE_MS);
            });
        }

        /* ════════════════════════════════════════════════════════════════
           GSAP + LENIS + HERO IMAGE EXPANSION
        ════════════════════════════════════════════════════════════════ */
        gsap.registerPlugin(ScrollTrigger);

        const lenis = new Lenis({
            duration: 1.2,
            easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            smooth: true, smoothTouch: false, autoRaf: true
        });
        lenis.on('scroll', ScrollTrigger.update);
        gsap.ticker.add(t => lenis.raf(t * 1000));
        gsap.ticker.lagSmoothing(0);

        function initHeroImage() {
            const wrap = document.getElementById('hero-img-wrap');
            const hero = document.getElementById('hero');
            const textRow = document.getElementById('hero-text-row');
            const devEl = document.getElementById('text-dev');
            const elopEl = document.getElementById('text-eloper');
            const gap = document.getElementById('hero-img-gap');

            const devR = devEl.getBoundingClientRect();
            /* elopEl is now above devEl — measure the right gap div instead */
            const gapDiv = document.getElementById('hero-img-gap');
            const gapDivR = gapDiv.getBoundingClientRect();
            const rowR = textRow.getBoundingClientRect();

            const gapLeft = devR.right;
            const gapRight = gapDivR.left;
            const gapWidth = gapRight - gapLeft;

            const textH = rowR.height;
            const imgH = textH * 1.1;
            const imgTop = rowR.top + (textH - imgH) / 2;

            wrap.style.left = gapLeft + 'px';
            wrap.style.top = imgTop + 'px';
            wrap.style.width = gapWidth + 'px';
            wrap.style.height = imgH + 'px';
            wrap.style.borderRadius = '1.2rem';
            wrap.style.opacity = '1';

            gap.style.width = gapWidth + 'px';

            const SCROLL_ROOM = window.innerHeight * 1.8;
            hero.style.height = (window.innerHeight + SCROLL_ROOM) + 'px';

            ScrollTrigger.create({
                trigger: hero,
                start: 'top top',
                end: `+=${SCROLL_ROOM}`,
                pin: '#hero-frame',
                pinSpacing: false,
            });

            gsap.to(wrap, {
                left: 0, top: 0,
                width: window.innerWidth + 'px',
                height: window.innerHeight + 'px',
                borderRadius: 0,
                ease: 'none',
                scrollTrigger: {
                    trigger: hero,
                    start: 'top top',
                    end: `+=${SCROLL_ROOM}`,
                    scrub: 1.2,
                }
            });

            /* Fade the left column (typewriter + Developer) out as image grows */
            gsap.to(devEl.parentElement, {
                opacity: 0, ease: 'none',
                scrollTrigger: {
                    trigger: hero,
                    start: 'top top',
                    end: `+=${SCROLL_ROOM * 0.45}`,
                    scrub: 1,
                }
            });

            gsap.to('#hero-hello', {
                opacity: 0, ease: 'none',
                scrollTrigger: {
                    trigger: hero,
                    start: 'top top',
                    end: `+=${SCROLL_ROOM * 0.3}`,
                    scrub: 1,
                }
            });

            gsap.to(wrap, {
                opacity: 0, ease: 'none',
                scrollTrigger: {
                    trigger: '#projects',
                    start: 'top 80%',
                    end: 'top 20%',
                    scrub: 1,
                }
            });
        }

        document.fonts.ready.then(() => {
            requestAnimationFrame(() => requestAnimationFrame(initHeroImage));
        });

        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                ScrollTrigger.getAll().forEach(t => t.kill());
                initHeroImage();
                initOtherAnimations();
            }, 200);
        });

        function initOtherAnimations() {
            const cards = gsap.utils.toArray('.project-card');
            cards.forEach((card, i) => {
                if (i === cards.length - 1) return;
                gsap.to(card, {
                    scale: 0.95, opacity: 0.5, ease: 'none',
                    scrollTrigger: {
                        trigger: cards[i + 1], start: 'top bottom', end: 'top top', scrub: true
                    }
                });
            });

            gsap.to('.reveal-text-scrub', {
                backgroundPosition: '0% 0', ease: 'none',
                scrollTrigger: { trigger: '#about', start: 'top 80%', end: 'center 40%', scrub: 1 }
            });
            gsap.to('.reveal-text-scrub-2', {
                backgroundPosition: '0% 0', ease: 'none',
                scrollTrigger: { trigger: '#about p', start: 'top 80%', end: 'bottom 60%', scrub: 1 }
            });

            gsap.fromTo('.footer-big',
                { yPercent: 60, opacity: 0 },
                {
                    yPercent: 0, opacity: 1, ease: 'none',
                    scrollTrigger: {
                        trigger: 'footer', start: 'top bottom', end: 'bottom bottom', scrub: 1
                    }
                }
            );
        }

        document.fonts.ready.then(() => {
            requestAnimationFrame(() => requestAnimationFrame(initOtherAnimations));
        });

        /* ════════════════════════════════════════════════════════════════
           CARD DECK — About Me section
        ════════════════════════════════════════════════════════════════ */
        (function () {
            const CARDS = [
                {
                    title: 'Tech Native',
                    desc: "A tech nerd since day one. Picked up coding at 16 and it's been my main passion ever since.",
                    img: 'https://images.unsplash.com/photo-1518770660439-4636190af475?w=640&h=960&fit=crop'
                },
                {
                    title: 'Problem Solver',
                    desc: 'Breaking complex problems is what drives me. Every bug is a puzzle waiting to be cracked.',
                    img: 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=640&h=960&fit=crop'
                },
                {
                    title: 'AI Explorer',
                    desc: 'Fascinated by Generative AI and LangChain. Always tinkering with the latest models and tools.',
                    img: 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=640&h=960&fit=crop'
                },
                {
                    title: 'Sports Fan',
                    desc: "Deep into Cricket and Football. MS Dhoni's calm and Ronaldo's drive are goals I live by.",
                    img: 'https://images.unsplash.com/photo-1508609349937-5ec4ae374ebf?fit=crop&w=640&h=960'
                },
                {
                    title: 'Music & Code',
                    desc: 'Music always on when I code. The right playlist makes everything flow.',
                    img: 'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=640&h=960&fit=crop'
                },
            ];

            const deck = document.getElementById('cardDeck');
            const dotsEl = document.getElementById('deckDots');
            const prevBtn = document.getElementById('deckPrev');
            const nextBtn = document.getElementById('deckNext');
            const N = CARDS.length;
            let active = 0, busy = false;

            function chunk(str, max) {
                return str.split(' ').reduce((acc, w) => {
                    const last = acc[acc.length - 1] || '';
                    if ((last + ' ' + w).trim().length <= max) {
                        acc[acc.length - 1] = (last + ' ' + w).trim();
                    } else { acc.push(w); }
                    return acc;
                }, ['']);
            }

            function makeLines(text, maxLen) {
                return chunk(text, maxLen)
                    .map(l => `<span class="line-mask"><span class="line-inner">${l}</span></span>`)
                    .join('');
            }

            CARDS.forEach((c, i) => {
                const el = document.createElement('div');
                el.className = 'deck-card';
                el.dataset.i = i;
                el.innerHTML = `
                    <div class="card-img-wrap">
                        <img src="${c.img}" alt="${c.title}" loading="lazy" draggable="false">
                    </div>
                    <div class="card-body">
                        <h3 class="card-title-el">${makeLines(c.title, 16)}</h3>
                        <p class="card-desc-el">${makeLines(c.desc, 30)}</p>
                    </div>`;
                deck.appendChild(el);
            });

            CARDS.forEach((_, i) => {
                const d = document.createElement('div');
                d.className = 'deck-dot' + (i === 0 ? ' is-active' : '');
                d.setAttribute('role', 'tab');
                d.setAttribute('aria-selected', i === 0 ? 'true' : 'false');
                d.addEventListener('click', () => goTo(i));
                dotsEl.appendChild(d);
            });

            function updateDots() {
                dotsEl.querySelectorAll('.deck-dot').forEach((d, i) => {
                    const on = i === active;
                    d.classList.toggle('is-active', on);
                    d.setAttribute('aria-selected', on ? 'true' : 'false');
                });
            }

            function layout(instant) {
                deck.querySelectorAll('.deck-card').forEach(card => {
                    const i = parseInt(card.dataset.i);
                    let slot = i - active;
                    if (slot > Math.floor(N / 2)) slot -= N;
                    if (slot < -Math.floor(N / 2)) slot += N;

                    const abs = Math.abs(slot);
                    const sign = Math.sign(slot) || 1;
                    const x = slot === 0 ? 0 : sign * 380 * abs;
                    const y = slot === 0 ? 0 : 10 * abs;
                    const rot = slot === 0 ? 0 : sign * 20 * abs;
                    const orig = slot === 0 ? '50% 100%' : slot > 0 ? '0% 100%' : '100% 100%';
                    const z = 100 - abs;

                    card.style.transition = instant ? 'none'
                        : 'transform .55s cubic-bezier(.34,1.4,.64,1), box-shadow .4s';
                    card.style.transformOrigin = orig;
                    card.style.zIndex = z;
                    card.style.transform =
                        `translate(-50%,-50%) translate(${x}px,${y}px) rotate(${rot}deg)`;
                    card.classList.toggle('is-active', slot === 0);
                });
            }

            function goTo(n) {
                if (busy) return;
                busy = true;
                active = ((n % N) + N) % N;
                layout(false);
                updateDots();
                setTimeout(() => { busy = false; }, 600);
            }

            layout(true);

            nextBtn.addEventListener('click', () => goTo(active + 1));
            prevBtn.addEventListener('click', () => goTo(active - 1));
            document.addEventListener('keydown', e => {
                const r = deck.getBoundingClientRect();
                if (r.top > window.innerHeight || r.bottom < 0) return;
                if (e.key === 'ArrowRight') goTo(active + 1);
                if (e.key === 'ArrowLeft') goTo(active - 1);
            });

            let pStartX = 0, pStartY = 0, pActive = false, pId = null;

            deck.addEventListener('pointerdown', e => {
                pStartX = e.clientX; pStartY = e.clientY;
                pActive = true; pId = e.pointerId;
                deck.setPointerCapture(e.pointerId);
            });
            deck.addEventListener('pointermove', e => {
                if (!pActive || e.pointerId !== pId) return;
                const dx = Math.abs(e.clientX - pStartX);
                const dy = Math.abs(e.clientY - pStartY);
                if (dx > dy && dx > 8) e.preventDefault();
            }, { passive: false });
            deck.addEventListener('pointerup', e => {
                if (!pActive || e.pointerId !== pId) return;
                pActive = false;
                const dx = e.clientX - pStartX;
                const dy = e.clientY - pStartY;
                if (Math.abs(dx) > 45 && Math.abs(dx) > Math.abs(dy))
                    dx < 0 ? goTo(active + 1) : goTo(active - 1);
            });
            deck.addEventListener('pointercancel', () => { pActive = false; });
            deck.addEventListener('click', e => {
                const card = e.target.closest('.deck-card');
                if (card?.classList.contains('is-active') && Math.abs(e.clientX - pStartX) < 8)
                    goTo(active + 1);
            });
        })();
    </script>
</body>

</html>
